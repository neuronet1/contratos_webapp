<div>
    <form method="post" name="contratoForm" >
        <div class="row">
            <div class="col-md-1">
                <img src="images/contratos1.png"/>
            </div>
            <div class="col-md-7">
                <h2 class="page-header" id="headerNombreTrabajador">{{original.trabajador.nombre}}</h2>
            </div>
            <div class="col-md-4">
                <button type="button"
                        id="btnGuardar"
                        ng-click="onPostContrato()"
                        ng-show="isEdited"
                        class="btn btn-primary">
                    <span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span> Guardar
                </button>
                <button type="button"
                        id="btnDeshacer"
                        ng-show="isEdited"
                        ng-click="onUndo()"
                        class="btn btn-primary">
                    <span class="glyphicon glyphicon-repeat" aria-hidden="true"></span> Deshacer
                </button>
                <a ng-href="trabajadores/print/{{current._id}}">
                    <button type="button"
                            id="btnImprimir"
                            class="btn btn-success">
                        <span class="glyphicon glyphicon-print" aria-hidden="true"></span> Imprimir
                    </button>

                </a>
            </div>
        </div>

        <div class="row">
            <tabset>
                <tab class="my-tab">
                    <tab-heading class="my-tab-heading">
                        <i class="glyphicon glyphicon-user"></i> Trabajador
                    </tab-heading>
                    <div class="panel panel-default">
                        <div class="panel-heading">
                        </div>
                        <div class="panel-body">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="trabajadorNombre">Nombre</label>
                                    <!-- xarreglar incluye watch en lugar de onchange -->
                                    <input type="text"
                                           required
                                           ng-change="onChange()"
                                           class="form-control"
                                           id="trabajadorNombre"
                                           name="trabajadorNombre"
                                           ng-model="current.trabajador.nombre" >
                                    <div
                                            class="error-messages"
                                            ng-if="interacted(contratoForm.trabajadorNombre)"
                                            data-ng-messages="contratoForm.trabajadorNombre.$error"
                                            data-ng-messages-include="validaciones"></div>
                                </div>

                                <div class="form-group">
                                    <label for="trabajadorFicha">Ficha</label>
                                    <input type="text"
                                           required
                                           minlength="6"
                                           maxlength="6"
                                           class="form-control"
                                           ng-change="onChange()"
                                           id="trabajadorFicha"
                                           name="trabajadorFicha"
                                           ng-model="current.trabajador.ficha"
                                           placeholder="Ficha">
                                    <div data-ng-messages="contratoForm.trabajadorFicha.$error"
                                         class="error-messages"
                                         ng-if="interacted(contratoForm.trabajadorFicha)"
                                         data-ng-messages-include="validaciones"></div>
                                </div>

                                <div class="form-group">
                                    <label for="trabajadorNivel">Nivel</label>
                                    <input type="text"
                                           required
                                           minlength="2"
                                           maxlength="2"
                                           class="form-control"
                                           ng-change="onChange()"
                                           id="trabajadorNivel"
                                           name="trabajadorNivel"
                                           ng-model="current.trabajador.nivel"
                                           placeholder="Nivel">

                                    <div data-ng-messages="contratoForm.trabajadorNivel.$error"
                                         class="error-messages"
                                         ng-if="interacted(contratoForm.trabajadorNivel)"
                                         data-ng-messages-include="validaciones"></div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="trabajadorProfesion">Profesión</label>
                                    <input type="text"
                                           required
                                           class="form-control"
                                           ng-change="onChange()"
                                           id="trabajadorProfesion"
                                           name="trabajadorProfesion"
                                           ng-model="current.trabajador.profesion"
                                           placeholder="Profesión">
                                    <div data-ng-messages="contratoForm.trabajadorProfesion.$error"
                                         class="error-messages"
                                         ng-if="interacted(contratoForm.trabajadorProfesion)"
                                         data-ng-messages-include="validaciones"></div>
                                </div>
                                <div class="form-group">
                                    <label for="trabajadorCategoria">Categoría</label>
                                    <input type="text"
                                           required
                                           class="form-control"
                                           id="trabajadorCategoria"
                                           name="trabajadorCategoria"
                                           ng-change="onChange()"
                                           ng-model="current.trabajador.categoria"
                                           placeholder="Categoría">
                                    <div data-ng-messages="contratoForm.trabajadorCategoria.$error"
                                         class="error-messages"
                                         ng-if="interacted(contratoForm.trabajadorCategoria)"
                                         data-ng-messages-include="validaciones"></div>
                                </div>
                                <div class="form-group">
                                    <label for="trabajadorPuesto">Puesto</label>
                                    <input type="text"
                                           required
                                           class="form-control"
                                           id="trabajadorPuesto"
                                           name="trabajadorPuesto"
                                           ng-model="current.trabajador.puesto"
                                           ng-change="onChange()"
                                           placeholder="Puesto">
                                    <div data-ng-messages="contratoForm.trabajadorPuesto.$error"
                                         class="error-messages"
                                         ng-if="interacted(contratoForm.trabajadorPuesto)"
                                         data-ng-messages-include="validaciones"></div>
                                </div>
                            </div>
                        </div>
                        <div class="panel-footer"></div>
                    </div>
                </tab>
                <tab class="my-tab">
                    <tab-heading class="my-tab-heading">
                        <i class="glyphicon glyphicon-home"></i> Casa
                    </tab-heading>
                    <div class="panel panel-default">
                        <div class="panel-heading">
                        </div>
                        <div class="panel-body">
                            <div class="col-md-6">

                                <div class="form-group">
                                    <label for="casaNumero">Número</label>
                                    <input type="text"
                                           required
                                           class="form-control"
                                           id="casaNumero"
                                           name="casaNumero"
                                           ng-model="current.casa.casa"
                                           ng-change="onChange()"
                                           placeholder="Número">
                                    <div data-ng-messages="contratoForm.casaNumero.$error"
                                         class="error-messages"
                                         ng-if="interacted(contratoForm.casaNumero)"
                                         data-ng-messages-include="validaciones"></div>
                                </div>
                                <div class="form-group">
                                    <label for="casaColonia">Colonia</label>
                                    <input type="text"
                                           required
                                           class="form-control"
                                           id="casaColonia"
                                           name="casaColonia"
                                           ng-model="current.casa.colonia"
                                           ng-change="onChange()"
                                           placeholder="Colonia">
                                    <div data-ng-messages="contratoForm.casaColonia.$error"
                                         class="error-messages"
                                         ng-if="interacted(contratoForm.casaColonia)"
                                         data-ng-messages-include="validaciones"></div>
                                </div>
                                <div class="form-group">
                                    <label for="casaParcela">Parcela</label>
                                    <input type="text"
                                           required
                                           class="form-control"
                                           id="casaParcela"
                                           name="casaParcela"
                                           ng-change="onChange()"
                                           ng-model="current.casa.parcela"
                                           placeholder="Parcela">
                                    <div data-ng-messages="contratoForm.casaParcela.$error"
                                         class="error-messages"
                                         ng-if="interacted(contratoForm.casaParcela)"
                                         data-ng-messages-include="validaciones"></div>
                                </div>
                                <div class="form-group">
                                    <label for="casaCodigoPostal">Código Postal</label>
                                    <input type="text"
                                           class="form-control"
                                           required
                                           minlength="5"
                                           maxlength="5"
                                           id="casaCodigoPostal"
                                           name="casaCodigoPostal"
                                           ng-change="onChange()"
                                           ng-model="current.casa.cp"
                                           placeholder="Código Postal">
                                    <div data-ng-messages="contratoForm.casaCodigoPostal.$error"
                                         class="error-messages"
                                         ng-if="interacted(contratoForm.casaCodigoPostal)"
                                         data-ng-messages-include="validaciones"></div>
                                </div>


                            </div>
                            <div class="col-md-6">

                                <div class="form-group">
                                    <label for="casaStatus">Estatus</label>
                                    <input type="text"
                                           class="form-control"
                                           required
                                           id="casaStatus"
                                           name="casaStatus"
                                           ng-change="onChange()"
                                           ng-model="current.casa.status"
                                           placeholder="Estatus">
                                    <div data-ng-messages="contratoForm.casaStatus.$error"
                                         class="error-messages"
                                         ng-if="interacted(contratoForm.casaStatus)"
                                         data-ng-messages-include="validaciones"></div>
                                </div>
                                <div class="form-group">
                                    <label for="casaEscritura">Escritura</label>
                                    <input type="text"
                                           class="form-control"
                                           required
                                           id="casaEscritura"
                                           name="casaEscritura"
                                           ng-change="onChange()"
                                           ng-model="current.casa.escritura"
                                           placeholder="Escritura">
                                    <div data-ng-messages="contratoForm.casaEscritura.$error"
                                         class="error-messages"
                                         ng-if="interacted(contratoForm.casaEscritura)"
                                         data-ng-messages-include="validaciones"></div>
                                </div>
                                <div class="form-group">
                                    <label for="casaEstado">Estado</label>
                                    <input type="text"
                                           class="form-control"
                                           required
                                           id="casaEstado"
                                           name="casaEstado"
                                           ng-change="onChange()"
                                           ng-model="current.casa.estado"
                                           placeholder="Estado">
                                    <div data-ng-messages="contratoForm.casaEstado.$error"
                                         class="error-messages"
                                         ng-if="interacted(contratoForm.casaEstado)"
                                         data-ng-messages-include="validaciones"></div>
                                </div>


                            </div>
                        </div>
                        <div class="panel-footer"></div>
                </div>
                </tab>

                <tab class="my-tab">
                    <tab-heading class="my-tab-heading">
                        <i class="glyphicon glyphicon-tower"></i> Empresa
                    </tab-heading>
                    <div class="panel panel-default">
                        <div class="panel-heading">
                        </div>
                        <div class="panel-body">

                            <div class="col-md-6">

                                <div class="form-group">
                                    <label for="empresaCentro">Centro de trabajo</label>
                                    <input type="text"
                                           required
                                           class="form-control"
                                           id="empresaCentro"
                                           name="empresaCentro"
                                           ng-change="onChange()"
                                           ng-model="current.empresa.centro"
                                           placeholder="Centro de trabajo">
                                    <div data-ng-messages="contratoForm.empresaCentro.$error"
                                         class="error-messages"
                                         ng-if="interacted(contratoForm.empresaCentro)"
                                         data-ng-messages-include="validaciones"></div>
                                </div>
                                <div class="form-group">
                                    <label for="empresaArea">Área</label>
                                    <br/>
                                    <textarea id="empresaArea"
                                              required
                                              name="empresaArea"
                                              ng-change="onChange()"
                                              cols="30"
                                              rows="5"
                                              ng-model="current.empresa.area"
                                              placeholder="Área"></textarea>
                                    <div data-ng-messages="contratoForm.empresaArea.$error"
                                         class="error-messages"
                                         ng-if="interacted(contratoForm.empresaArea)"
                                         data-ng-messages-include="validaciones"></div>
                                </div>


                            </div>



                        </div>

                        <div class="panel-footer"></div>
                    </div>
                </tab>

                <tab class="my-tab">
                    <tab-heading class="my-tab-heading">
                        <i class="glyphicon glyphicon-time"></i> Fechas
                    </tab-heading>
                    <div class="panel panel-default">
                        <div class="panel-heading">
                        </div>
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Fecha de solicitud de vivienda</label>
                                        <datepicker
                                                required
                                                id="fechasSolicitud"
                                                name="fechasSolicitud"
                                                ng-change="onChange()"
                                                ng-model="current.fechas.solicitud"
                                                min-date="minDate"
                                                show-weeks="false"
                                                class="well well-sm">
                                        </datepicker>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Fecha de autorización</label>
                                        <datepicker
                                                required
                                                id="fechasAutorizacion"
                                                name="fechasAutorizacion"
                                                ng-change="onChange()"
                                                ng-model="current.fechas.autorizacion"
                                                min-date="minDate"
                                                show-weeks="false"
                                                class="well well-sm">
                                        </datepicker>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Fecha de firma del contrato</label>
                                        <datepicker
                                                required
                                                id="fechasFichasContrato"
                                                name="fechasFichasContrato"
                                                ng-change="onChange()"
                                                ng-model="current.fechas.firmaContrato"
                                                min-date="minDate"
                                                show-weeks="false"
                                                class="well well-sm">
                                        </datepicker>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Inicio vigencia del contrato</label>
                                        <datepicker
                                                required
                                                id="fechasInicioVigencia"
                                                name="fechasInicioVigencia"
                                                ng-change="onChange()"
                                                ng-model="current.fechas.inicioVigencia"
                                                min-date="minDate"
                                                show-weeks="false"
                                                class="well well-sm">
                                        </datepicker>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Fin vigencia del contrato</label>
                                        <datepicker
                                                required
                                                id="fechasFinVigencia"
                                                name="fechasFinVigencia"
                                                ng-change="onChange()"
                                                ng-model="current.fechas.finVigencia"
                                                min-date="minDate"
                                                show-weeks="false"
                                                class="well well-sm">
                                        </datepicker>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="panel-footer"></div>
                    </div>
                </tab>


                <tab class="my-tab">
                    <tab-heading class="my-tab-heading">
                        <i class="glyphicon glyphicon-pencil"></i> Firmas
                    </tab-heading>
                    <div class="panel panel-default">
                        <div class="panel-heading"></div>
                        <div class="panel-body">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="firmasArrendador">Arrendador</label>
                                    <input type="text"
                                           required
                                           class="form-control"
                                           id="firmasArrendador"
                                           name="firmasArrendador"
                                           ng-model="current.firmas.arrendador"
                                           ng-change="onChange()"
                                           placeholder="Nombre de la persona">
                                    <div data-ng-messages="contratoForm.firmasArrendador.$error"
                                         class="error-messages"
                                         ng-if="interacted(contratoForm.firmasArrendador)"
                                         data-ng-messages-include="validaciones"></div>
                                </div>

                                <div class="form-group">
                                    <label for="empresaArea">Cargo arrendador</label>
                                    <br/>
                                    <textarea id="firmasArrendadorCargo"
                                              required
                                              name="firmasArrendadorCargo"
                                              ng-change="onChange()"
                                              cols="60"
                                              rows="3"
                                              ng-model="current.firmas.arrendadorCargo"
                                              placeholder="Área"></textarea>
                                    <div data-ng-messages="contratoForm.firmasArrendadorCargo.$error"
                                         class="error-messages"
                                         ng-if="interacted(contratoForm.firmasArrendadorCargo)"
                                         data-ng-messages-include="validaciones"></div>
                                </div>

                           </div>
                            <div class="col-md-6">
                            </div>


                            <div class="col-md-12">

                                <div class="form-group">
                                    <label for="firmasFirma1">Firma 1</label>
                                    <input type="text"
                                           required
                                           class="form-control"
                                           id="firmasFirma1"
                                           name="firmasFirma1"
                                           ng-model="current.firmas.firma1"
                                           ng-change="onChange()"
                                           placeholder="Nombre de la persona">
                                    <div data-ng-messages="contratoForm.firmasFirma1.$error"
                                         class="error-messages"
                                         ng-if="interacted(contratoForm.firmasFirma1)"
                                         data-ng-messages-include="validaciones"></div>
                                </div>

                                <div class="form-group">
                                    <label for="firmasCargo1">Cargo 1</label>
                                    <br/>
                                    <textarea id="firmasCargo1"
                                              required
                                              name="firmasCargo1"
                                              ng-change="onChange()"
                                              cols="120"
                                              rows="3"
                                              ng-model="current.firmas.cargo1"
                                              placeholder="Área"></textarea>
                                    <div data-ng-messages="contratoForm.firmasCargo1.$error"
                                         class="error-messages"
                                         ng-if="interacted(contratoForm.firmasCargo1)"
                                         data-ng-messages-include="validaciones"></div>
                                </div>


                            </div>

                            <div class="col-md-6">

                                <div class="form-group">
                                    <label for="firmasFirma2">Firma 2</label>
                                    <input type="text"
                                           required
                                           class="form-control"
                                           id="firmasFirma2"
                                           name="firmasFirma2"
                                           ng-model="current.firmas.firma2"
                                           ng-change="onChange()"
                                           placeholder="Nombre de la persona">
                                    <div data-ng-messages="contratoForm.firmasFirma2.$error"
                                         class="error-messages"
                                         ng-if="interacted(contratoForm.firmasFirma2)"
                                         data-ng-messages-include="validaciones"></div>
                                </div>

                                <div class="form-group">
                                    <label for="firmasCargo2">Cargo 2</label>
                                    <br/>
                                    <textarea id="firmasCargo2"
                                              required
                                              name="firmasCargo2"
                                              ng-change="onChange()"
                                              cols="60"
                                              rows="3"
                                              ng-model="current.firmas.cargo2"
                                              placeholder="Área"></textarea>
                                    <div data-ng-messages="contratoForm.firmasCargo2.$error"
                                         class="error-messages"
                                         ng-if="interacted(contratoForm.firmasCargo2)"
                                         data-ng-messages-include="validaciones"></div>
                                </div>

                            </div>

                            <div class="col-md-6">

                                <div class="form-group">
                                    <label for="firmasFirma3">Firma 3</label>
                                    <input type="text"
                                           required
                                           class="form-control"
                                           id="firmasFirma3"
                                           name="firmasFirma3"
                                           ng-model="current.firmas.firma3"
                                           ng-change="onChange()"
                                           placeholder="Nombre de la persona">
                                    <div data-ng-messages="contratoForm.firmasFirma3.$error"
                                         class="error-messages"
                                         ng-if="interacted(contratoForm.firmasFirma3)"
                                         data-ng-messages-include="validaciones"></div>
                                </div>

                                <div class="form-group">
                                    <label for="firmasCargo3">Cargo 3</label>
                                    <br/>
                                    <textarea id="firmasCargo3"
                                              required
                                              name="firmasCargo3"
                                              ng-change="onChange()"
                                              cols="60"
                                              rows="3"
                                              ng-model="current.firmas.cargo3"
                                              placeholder="Área"></textarea>
                                    <div data-ng-messages="contratoForm.firmasCargo3.$error"
                                         class="error-messages"
                                         ng-if="interacted(contratoForm.firmasCargo3)"
                                         data-ng-messages-include="validaciones"></div>
                                </div>

                            </div>


                            <div class="col-md-12">

                                <div class="form-group">
                                    <label for="firmasSancion">Sanción jurídica de acuerdo al oficio</label>
                                    <input type="text"
                                           required
                                           class="form-control"
                                           id="firmasSancion"
                                           name="firmasSancion"
                                           ng-model="current.firmas.sancion"
                                           ng-change="onChange()"
                                           placeholder="Número de oficio">
                                    <div data-ng-messages="contratoForm.firmasSancion.$error"
                                         class="error-messages"
                                         ng-if="interacted(contratoForm.firmasSancion)"
                                         data-ng-messages-include="validaciones"></div>
                                </div>

                            </div>

                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="firmasFirma4">Firma 4</label>
                                    <input type="text"
                                           required
                                           class="form-control"
                                           id="firmasFirma4"
                                           name="firmasFirma4"
                                           ng-model="current.firmas.firma4"
                                           ng-change="onChange()"
                                           placeholder="Nombre de la persona">
                                    <div data-ng-messages="contratoForm.firmasFirma4.$error"
                                         class="error-messages"
                                         ng-if="interacted(contratoForm.firmasFirma4)"
                                         data-ng-messages-include="validaciones"></div>
                                </div>

                                <div class="form-group">
                                    <label for="firmasCargo4">Cargo 4</label>
                                    <br/>
                                    <textarea id="firmasCargo4"
                                              required
                                              name="firmasCargo4"
                                              ng-change="onChange()"
                                              cols="120"
                                              rows="3"
                                              ng-model="current.firmas.cargo4"
                                              placeholder="Área"></textarea>
                                    <div data-ng-messages="contratoForm.firmasCargo4.$error"
                                         class="error-messages"
                                         ng-if="interacted(contratoForm.firmasCargo4)"
                                         data-ng-messages-include="validaciones"></div>
                                </div>
                            </div>


                        </div>




                        <div class="panel-footer"></div>
                    </div>
                </tab>

                <tab class="my-tab">
                    <tab-heading class="my-tab-heading">
                        <i class="glyphicon glyphicon-book"></i> Escrituras
                    </tab-heading>
                    <div class="panel panel-default">
                        <div class="panel-heading">
                        </div>
                        <div class="panel-body">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="escrituras1">Leyenda escritura 1</label>


                                    <textarea id="escrituras1"
                                              required
                                              name="escrituras1"
                                              ng-change="onChange()"
                                              cols="120"
                                              rows="5"
                                              ng-model="current.escrituras.leyenda1"
                                              placeholder="Leyenda"></textarea>

                                   <div data-ng-messages="contratoForm.escrituras1.$error"
                                         class="error-messages"
                                         ng-if="interacted(contratoForm.escrituras1)"
                                         data-ng-messages-include="validaciones"></div>
                                </div>
                            </div>

                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="escrituras2">Leyenda escritura 2</label>


                                    <textarea id="escrituras2"
                                              required
                                              name="escrituras2"
                                              ng-change="onChange()"
                                              cols="120"
                                              rows="5"
                                              ng-model="current.escrituras.leyenda2"
                                              placeholder="Leyenda"></textarea>

                                    <div data-ng-messages="contratoForm.escrituras2.$error"
                                         class="error-messages"
                                         ng-if="interacted(contratoForm.escrituras2)"
                                         data-ng-messages-include="validaciones"></div>
                                </div>
                            </div>


                        </div>
                        <div class="panel-footer"></div>
                    </div>
                </tab>

            </tabset>
        </div>



        <input type="hidden" name="_id" value="{{current._id}}"/>

        <!--definimos los mensajes de validacion-->
        <script type="text/ng-template" id="validaciones">
            <div class="error-message" ng-message="required"><span class="glyphicon glyphicon-hand-right" aria-hidden="true"></span> Este campo es obligatorio</div>
            <div class="error-message" ng-message="minlength"><span class="glyphicon glyphicon-hand-right" aria-hidden="true"></span> El campo  no tiene los caracteres suficientes</div>
            <div class="error-message" ng-message="maxlength"><span class="glyphicon glyphicon-hand-right" aria-hidden="true"></span> El campo excede los caracteres requeridos</div>
        </script>


    </form>
</div>